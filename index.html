<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>–î—ã–º–æ—Ö–æ–¥</title>

  <!-- Prototype for demo; not for real-money gambling -->
  <!-- Fonts: Montserrat for all text -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="styles.css">
  <style>
    /* Help Button Styles */
    .help-button {
      position: fixed;
      top: 20px;
      right: 20px;
      width: 44px;
      height: 44px;
      border-radius: 50%;
      background: var(--accent);
      color: white;
      border: none;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      z-index: 1000;
      box-shadow: 0 4px 15px rgba(124, 77, 255, 0.3);
      transition: all 0.3s ease;
    }

    .help-button:hover {
      transform: scale(1.1);
      background: #8c6bff;
      box-shadow: 0 6px 20px rgba(124, 77, 255, 0.4);
    }

    /* Help Panel Styles */
    .help-panel {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0.9);
      width: 90%;
      max-width: 600px;
      max-height: 80vh;
      background: linear-gradient(135deg, #1a1540 0%, #0f0c2e 100%);
      border-radius: 16px;
      padding: 0;
      z-index: 1001;
      opacity: 0;
      pointer-events: none;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      border: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
      overflow: hidden;
      backdrop-filter: none;
      -webkit-backdrop-filter: none;
      filter: none;
    }

    .help-panel.active {
      opacity: 1;
      transform: translate(-50%, -50%) scale(1);
      pointer-events: auto;
    }

    .help-header {
      background: linear-gradient(90deg, var(--accent) 0%, #9c7bff 100%);
      padding: 16px 24px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: white;
    }

    .help-header h2 {
      margin: 0;
      font-size: 1.5rem;
      font-weight: 700;
    }

    .close-help {
      background: none;
      border: none;
      color: white;
      font-size: 28px;
      cursor: pointer;
      line-height: 1;
      padding: 0 8px;
      border-radius: 4px;
      transition: background-color 0.2s;
    }

    .close-help:hover {
      background: rgba(255, 255, 255, 0.2);
    }

    .help-content {
      padding: 20px;
      overflow-y: auto;
      max-height: calc(80vh - 70px);
    }

    .help-section {
      margin-bottom: 24px;
      background: rgba(255, 255, 255, 0.03);
      border-radius: 12px;
      padding: 16px;
      border: 1px solid rgba(255, 255, 255, 0.05);
    }

    .help-section h3 {
      color: var(--gold);
      margin-top: 0;
      margin-bottom: 12px;
      font-size: 1.2rem;
      border-bottom: 1px solid rgba(255, 255, 255, 0.1);
      padding-bottom: 8px;
    }

    .help-section p {
      margin: 8px 0;
      line-height: 1.5;
      color: #e0e0e0;
    }

    .help-section p strong {
      color: var(--gold);
    }

    /* Overlay without blur */
    .help-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.5);
      z-index: 1000;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease;
    }

    /* Help Panel - no blur */
    .help-panel {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0.9);
      width: 90%;
      max-width: 600px;
      max-height: 80vh;
      background: linear-gradient(135deg, #1a1540 0%, #0f0c2e 100%);
      border-radius: 16px;
      padding: 0;
      z-index: 1001;
      opacity: 0;
      pointer-events: none;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      border: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
      overflow: hidden;
    }

    .help-overlay.active {
      opacity: 1;
      pointer-events: auto;
    }

    @media (max-width: 768px) {
      .help-panel {
        width: 95%;
        max-height: 85vh;
      }
      
      .help-content {
        padding: 15px;
      }
      
      .help-section {
        padding: 12px;
      }
    }
  </style>
</head>
<body>

<div class="stage" role="application" aria-label="Prototype slot game">
  <!-- Left panel -->
  <aside class="side" aria-hidden="false">
    <div class="brand">–î—ã–º–æ—Ö–æ–¥</div>
    <div class="small">Balance</div>
    <div class="balance" aria-live="polite">
      <div class="amount" id="balance">1000</div>
      <div class="small">‚ÇΩ</div>
    </div>
    <div class="bonus-panel" style="margin-top: 12px; text-align: center;">
      <div class="small">Bonus Spins</div>
      <div class="stat" id="bonus-spins">0</div>
    </div>

    <div class="panel-row"><div class="small">Min Bet</div><div class="stat" id="min-bet">10</div></div>
    <div class="panel-row"><div class="small">Max Bet</div><div class="stat" id="max-bet">10000</div></div>

    <div style="margin-top:16px">
      <div class="small">History (last 20)</div>
      <div class="history-container" style="max-height:300px;overflow-y:auto;margin-top:8px;border:none;border-radius:8px;background:#0b0820">
        <ol id="history" style="padding-left:18px;margin:0;color:var(--muted);font-size:12px;list-style-position:inside"></ol>
      </div>
      <div style="margin-top:8px;display:flex;gap:8px;flex-wrap:wrap">
        <button id="export-json" class="btn" title="Export history">Export JSON</button>
        <button id="clear-history" class="btn" title="Clear history" style="background:rgba(255,107,107,0.1);color:#ff6b6b;border:1px solid rgba(255,107,107,0.2)">Clear</button>
      </div>
    </div>
    <div style="margin-top:8px;display:flex;gap:8px">
      <button id="reset" class="btn" title="Reset balance">Reset</button>
    </div>
  </aside>

  <!-- Main card -->
  <!-- Help Button -->
  <button id="help-button" class="help-button" aria-label="Help and Information">
    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="10"></circle>
      <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
      <line x1="12" y1="17" x2="12.01" y2="17"></line>
    </svg>
  </button>

  <!-- Help Panel -->
  <div id="help-panel" class="help-panel">
    <div class="help-header">
      <h2>–ü–æ–º–æ—â—å –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è</h2>
      <button id="close-help" class="close-help" aria-label="Close help">√ó</button>
    </div>
    <div class="help-content">
      <div class="help-section">
        <h3>–ö–∞–∫ –∏–≥—Ä–∞—Ç—å</h3>
        <p>1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å—Ç–∞–≤–∫—É —Å –ø–æ–º–æ—â—å—é –∫–Ω–æ–ø–æ–∫ + –∏ -</p>
        <p>2. –ù–∞–∂–º–∏—Ç–µ SPIN –∏–ª–∏ –∫–Ω–æ–ø–∫—É –≤ —Ü–µ–Ω—Ç—Ä–µ –¥–ª—è –≤—Ä–∞—â–µ–Ω–∏—è</p>
        <p>3. –í—ã–∏–≥—Ä—ã—à–∏ –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è –∑–∞ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è 3+ —Å–∏–º–≤–æ–ª–æ–≤ –Ω–∞ –ª–∏–Ω–∏—è—Ö</p>
      </div>
      <div class="help-section">
        <h3>–û—Å–æ–±—ã–µ —Å–∏–º–≤–æ–ª—ã</h3>
        <p>üéÅ <strong>Wild</strong> - –∑–∞–º–µ–Ω—è–µ—Ç –ª—é–±—ã–µ —Å–∏–º–≤–æ–ª—ã</p>
        <p>üé∞ <strong>Scatter</strong> - –¥–∞—ë—Ç –±–µ—Å–ø–ª–∞—Ç–Ω—ã–µ —Å–ø–∏–Ω—ã</p>
        <p>üíé <strong>Bonus</strong> - –∑–∞–ø—É—Å–∫–∞–µ—Ç –±–æ–Ω—É—Å–Ω—É—é –∏–≥—Ä—É</p>
      </div>
      <div class="help-section">
        <h3>–ë–æ–Ω—É—Å–Ω—ã–π —Ä–∞—É–Ω–¥</h3>
        <p>‚Ä¢ –ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –ø—Ä–∏ —Å–±–æ—Ä–µ 3+ –±–æ–Ω—É—Å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤</p>
        <p>‚Ä¢ –î–∞—ë—Ç 10 –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö —Å–ø–∏–Ω–æ–≤ —Å –º–Ω–æ–∂–∏—Ç–µ–ª–µ–º x3</p>
        <p>‚Ä¢ –ú–æ–∂–Ω–æ –¥–æ–∫—É–ø–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–ø–∏–Ω—ã</p>
      </div>
    </div>
  </div>

  <main class="card" role="main">
    <div class="header">
      <div>
        <div class="title">–î—ã–º–æ—Ö–æ–¥ 5√ó5</div>
        <div class="subtitle">Enhanced 5√ó5 Slot ‚Äî 25 Paylines, Bonus Game, Wild & Scatter</div>
      </div>
      <div style="display:flex;gap:8px;align-items:center">
        <button id="mute" class="btn" aria-pressed="false" aria-label="Toggle sound">üîä</button>
        <button id="music-toggle" class="btn" aria-pressed="false" aria-label="Toggle background music">üéµ</button>
        <div style="display:flex;align-items:center;gap:6px">
          <span style="font-size:12px;color:var(--muted)">üé∂</span>
          <input type="range" id="music-volume" min="0" max="100" value="30" 
                 style="width:60px;height:4px;background:rgba(255,255,255,0.1);border-radius:2px;outline:none"
                 aria-label="Music volume">
        </div>
        <div style="text-align:right">
          <div class="small">Volatility</div>
          <select id="vol" class="btn" style="background:transparent;color:#fff;border-radius:10px;border:1px solid rgba(255,255,255,0.03);padding:6px">
            <option value="medium">Medium</option>
            <option value="low">Low</option>
            <option value="high">High</option>
          </select>
        </div>
      </div>
    </div>

    <div class="reels-wrap" aria-hidden="false">
      <div class="reels" id="reels" role="region" aria-label="Game reels">
        <!-- 5 reels -->
        <div class="reel" data-index="0" aria-hidden="false"><div class="strip"></div></div>
        <div class="reel" data-index="1"><div class="strip"></div></div>
        <div class="reel" data-index="2"><div class="strip"></div></div>
        <div class="reel" data-index="3"><div class="strip"></div></div>
        <div class="reel" data-index="4"><div class="strip"></div></div>
        <!-- Canvas overlay for drawing payline visuals (absolute over reels) -->
        <canvas id="payline-canvas" class="payline-canvas" aria-hidden="true"></canvas>
      </div>
    </div>

    <div class="controls" role="region" aria-label="Controls">
      <div class="bet-area" aria-hidden="false">
        <button id="dec" class="btn" aria-label="Decrease bet">‚àí</button>
        <input id="bet" type="number" value="100" min="10" step="10" aria-label="Bet amount">
        <button id="inc" class="btn" aria-label="Increase bet">+</button>
      </div>

      <button id="spin" class="spin-btn" aria-label="Spin (space)"><span id="spin-text">SPIN</span></button>
      <button id="auto" class="btn" aria-pressed="false" aria-label="Auto spin">AUTO</button>
    </div>

    <div class="info-row">
      <div style="display:flex;gap:8px;align-items:center;justify-content:center;width:100%">
        <div class="small">Last win:</div><div class="stat" id="last-win">0 ‚ÇΩ</div>
      </div>
    </div>

    <div class="message" id="message" aria-live="polite">
      5√ó5 Enhanced Slot —Å 25 –ª–∏–Ω–∏—è–º–∏! –ù–∞–∂–º–∏—Ç–µ SPIN –∏–ª–∏ –ø—Ä–æ–±–µ–ª –¥–ª—è –≤—Ä–∞—â–µ–Ω–∏—è.
      Wild ‚≠ê –∑–∞–º–µ–Ω—è–µ—Ç, Scatter üî• –∑–∞–ø—É—Å–∫–∞–µ—Ç –±–æ–Ω—É—Å! üéµ –ú—É–∑—ã–∫–∞: —Å–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É "audio" –∏ –¥–æ–±–∞–≤—å—Ç–µ —Ñ–∞–π–ª "baobab.mp3"
    </div>
  </main>

  <!-- Right panel -->
  <aside class="side" aria-hidden="false">
    <div class="small">Session Stats</div>
    <div class="panel-row"><div class="small">Spins</div><div class="stat" id="total-spins">0</div></div>
    <div class="panel-row"><div class="small">Total Won</div><div class="stat" id="total-won">0</div></div>
    <div class="panel-row"><div class="small">Bonus Spins</div><div class="stat" id="bonus-spins">0</div></div>
    
    <!-- Side Ad Banner -->
    <div class="ad-banner-side">
      <a href="https://rutube.ru/video/be9b5aece2911aecc68fa03942e25bac" target="_blank" rel="noopener noreferrer" style="display:inline-block">
        <img src="img/ad1.png" alt="Advertisement" onerror="this.style.display='none';this.parentElement.style.display='none'">
      </a>
    </div>

    <div style="margin-top:12px">
      <div class="small">Paytable (√ó bet) - 5√ó5 Grid</div>
      <ul style="padding-left:18px;margin-top:8px;color:var(--muted);font-size:13px">
        <li><span class="trident-symbol" style="display:inline-block;width:20px;height:20px;background:url('img/kalik11.jpg') center/contain no-repeat;margin-right:4px;vertical-align:middle;"></span> √ó6/8/15 (3/4/5)</li>
        <li><span class="lightning-symbol" style="display:inline-block;width:20px;height:20px;background:url('img/trava.jpg') center/contain no-repeat;margin-right:4px;vertical-align:middle;"></span> √ó4/5/8</li>
        <li><span class="coin-symbol" style="display:inline-block;width:20px;height:20px;background:url('img/par.jpg') center/contain no-repeat;margin-right:4px;vertical-align:middle;"></span> √ó3/4/6</li>
        <li><span class="laurel-symbol" style="display:inline-block;width:20px;height:20px;background:url('img/veip.jpg') center/contain no-repeat;margin-right:4px;vertical-align:middle;"></span> √ó2/2.5/4</li>
        <li><span class="trophy-symbol" style="display:inline-block;width:20px;height:20px;background:url('img/kaif.jpg') center/contain no-repeat;margin-right:4px;vertical-align:middle;"></span> √ó3/4/7</li>
        <li><span class="eagle-symbol" style="display:inline-block;width:20px;height:20px;background:url('img/sigi.jpg') center/contain no-repeat;margin-right:4px;vertical-align:middle;"></span> √ó2/2.5/4</li>
        <li><span class="temple-symbol" style="display:inline-block;width:20px;height:20px;background:url('img/pivo.jpg') center/contain no-repeat;margin-right:4px;vertical-align:middle;"></span> √ó6/8/12</li>
        <li><span class="sword-symbol" style="display:inline-block;width:20px;height:20px;background:url('img/crack.jpg') center/contain no-repeat;margin-right:4px;vertical-align:middle;"></span> √ó3/4/6</li>
        <li><span class="shield-symbol" style="display:inline-block;width:20px;height:20px;background:url('img/ugli11.jpg') center/contain no-repeat;margin-right:4px;vertical-align:middle;"></span> √ó2/2.5/4</li>
        <li><span class="glock-symbol" style="display:inline-block;width:20px;height:20px;background:url('img/glock.jpg') center/contain no-repeat;margin-right:4px;vertical-align:middle;"></span> √ó3/4/6</li>
        <li>Wild (<span class="wild-symbol" style="display:inline-block;width:20px;height:20px;background:url('img/wild.jpg') center/contain no-repeat;margin-right:4px;vertical-align:middle;"></span>) substitutes any symbol</li>
        <li>Scatter (<span class="scatter-symbol" style="display:inline-block;width:20px;height:20px;background:url('img/bonus.jpg') center/contain no-repeat;margin-right:4px;vertical-align:middle;"></span>) √ó5/10/25 (3/4/5)</li>
        <li>25 Paylines - 5√ó5 Grid</li>
      </ul>
    </div>
    
    <div style="margin-top:12px">
      <div class="small">Big Wins Statistics</div>
      <div style="display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:8px">
        <div style="text-align:center;padding:8px;background:rgba(255,215,0,0.1);border-radius:8px;border:1px solid rgba(255,215,0,0.2)">
          <div class="small" style="color:var(--muted)">Big Wins</div>
          <div class="stat" id="big-wins" style="color:#ffd36b">0</div>
        </div>
        <div style="text-align:center;padding:8px;background:rgba(124,77,255,0.1);border-radius:8px;border:1px solid rgba(124,77,255,0.2)">
          <div class="small" style="color:var(--muted)">Mega Wins</div>
          <div class="stat" id="mega-wins" style="color:#b388ff">0</div>
        </div>
        <div style="text-align:center;padding:8px;background:rgba(255,0,110,0.1);border-radius:8px;border:1px solid rgba(255,0,110,0.2);grid-column:1/-1">
          <div class="small" style="color:var(--muted)">Super Wins</div>
          <div class="stat" id="super-wins" style="color:#ff4081">0</div>
        </div>
      </div>
    </div>
  </aside>
</div>

<!-- Win banner overlay -->
<div id="win-banner" class="win-banner" aria-live="polite">
  <div>üéâ –í–´ –í–´–ò–ì–†–ê–õ–ò</div>
  <div id="win-sum">0 ‚ÇΩ</div>
</div>

<!-- Confetti canvas for win animations -->
<canvas id="confetti-canvas" class="confetti-canvas" aria-hidden="true"></canvas>

<!-- Background music -->
<audio id="background-music" src="audio/baobab.mp3" preload="auto" loop></audio>

<!-- Floating Buy Bonus Button -->
<div class="floating-bonus-btn" id="floating-bonus-container">
  <button id="buy-bonus" class="floating-bonus-button">
    <div class="bonus-icon">üéÅ</div>
  </button>
</div>

<script src="slot-bonus.js"></script>
<script>
  // Help Panel Toggle
  const helpButton = document.getElementById('help-button');
  const helpPanel = document.getElementById('help-panel');
  const closeHelp = document.getElementById('close-help');
  
  // Create overlay
  const overlay = document.createElement('div');
  overlay.className = 'help-overlay';
  document.body.appendChild(overlay);
  
  // Toggle help panel
  function toggleHelp() {
    helpPanel.classList.toggle('active');
    overlay.classList.toggle('active');
    document.body.style.overflow = helpPanel.classList.contains('active') ? 'hidden' : '';
  }
  
  // Event listeners
  helpButton.addEventListener('click', toggleHelp);
  closeHelp.addEventListener('click', toggleHelp);
  overlay.addEventListener('click', toggleHelp);
  
  // Close on Escape key
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape' && helpPanel.classList.contains('active')) {
      toggleHelp();
    }
  });
</script>
</body>
</html>
